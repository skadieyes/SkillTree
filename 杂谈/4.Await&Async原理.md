# Await&Async原理(迭代器，生成器)

## 参考资料
> [Async/Await 如何通过同步的方式实现异步](https://juejin.im/post/5d2c814c6fb9a07ecd3d8e43#heading-3)

## 概述
> async/await 是参照 Generator 封装的一套异步处理方案，可以理解为 Generator 的语法糖。Generator依赖于迭代器Iterator, Iterator的思想来源于单向链表。

## 单向链表
> 链表（Linked list）是一种常见的基础数据结构，是一种线性表，但是并不会按线性的顺序储存数据，而是在每一个节点里存到下一个节点的指针（Pointer）。

> 链表无需预先分配内存

> 链表插入/删除节点不影响其他节点，效率高

## Iterator
> Iterator的就是迭代器，它的遍历过程类似单向链表。

> 一个对象要变成可迭代的，必须实现@iterator方法， Symbol.iterator的属性。

> 当一个对象需要被迭代的时候，它的@iterator方法被调用且无参数，返回一个用于迭代中获得值的迭代器。

### 如何成为一个迭代器
> 它实现了一个next()方法，该方法必须返回一个对象，对象有两个必要的属性，done(Boolean|迭代器是否已超过了可迭代次数), value（迭代器的返回值，done为true时可以忽略）

例如
#### Code
 ```javascript
    let obj = {
    data: [ 'hello', 'world' ],
    [Symbol.iterator]() {
        const self = this;
        let index = 0;
        return {
            next() {
                if (index < self.data.length) {
                    return {
                        value: self.data[index++],
                        done: false
                    };
                } else {
                    return { value: undefined, done: true };
                }
            }
        };
    }
};
  ```
   ```javascript
   for (let value of obj) {
        console.log(value);
    }
    // hello
    // world
    // undefined
   ```